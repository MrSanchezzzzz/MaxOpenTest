import 'package:flutter/material.dart';
import 'package:cached_network_image/cached_network_image.dart';
import 'package:maxopentest/widgets/bookmark_indicator.dart';
import '../entities/movie.dart';

class MoviePoster extends StatelessWidget {
  const MoviePoster(
      {super.key, required this.width, required this.height, required this.movie, this.onTap, this.loading = false});

  final double height;
  final double width;
  final Function()? onTap;
  final Movie movie;
  final bool loading;

  @override
  Widget build(BuildContext context) {
    bool hasImage = false;
    if(movie.posterUrl!=null){
      hasImage=movie.posterUrl!.isNotEmpty||movie.posterUrl!.startsWith('original');
    }
    return SizedBox(
        width: width,
        height: height,
        child: Stack(
          children: [
            hasImage
                ? CachedNetworkImage(
                    imageUrl: movie.posterUrl!,
                    placeholder: (context, _) => Container(),
                    imageBuilder: (context, imageProvider) => Container(
                        decoration: BoxDecoration(
                      image: DecorationImage(
                        image: imageProvider,
                        fit: BoxFit.cover,
                      ),
                      color: const Color(0xFF424242),
                      borderRadius: BorderRadius.circular(15),
                    )),
                  )
                : Container(
                    decoration: BoxDecoration(
                    color: const Color(0xFF424242),
                    borderRadius: BorderRadius.circular(15),
                  )),
            !loading?Positioned(
              top: 0,
              right: 0,
              child: BookmarkIndicator(
                movie: movie,
                onTap: onTap ?? () {},
              ),
            ):Container()
          ],
        ));
  }
}
