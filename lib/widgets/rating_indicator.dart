import 'package:flutter/material.dart';

class RatingIndicator extends StatelessWidget {
  const RatingIndicator({super.key,this.rating=5});
  final double? rating;

  @override
  Widget build(BuildContext context) {
    final int fullStars = rating != null ? rating!.floor() : 0;
    final bool hasHalfStar = rating != null && (rating! - fullStars) >= 0.5;
    final int emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);

    List<Widget> stars = [];
    for (int i = 0; i < fullStars; i++) {
      stars.add(_buildStar('assets/icons/star-full.png'));
    }
    if (hasHalfStar) {
      stars.add(_buildStar('assets/icons/star-half.png'));
    }
    for (int i = 0; i < emptyStars; i++) {
      stars.add(_buildStar('assets/icons/star-empty.png'));
    }
    //TODO Text in one line with stars
    return Row(
      children: [
        Text(
        (rating.toString()),
          style: TextStyle(
            fontFamily: 'Poppins',
            fontSize: 20,
          ),
        ),
        SizedBox(width: 4),
        Row(children: stars),
      ],
    );
  }

  Widget _buildStar(String url) {
    return Padding(
      padding: EdgeInsets.symmetric(horizontal: 3.5,vertical: 3),
      child: Image.asset(
        url,
        width: 20,height: 20,
      ),
    );
  }
}
